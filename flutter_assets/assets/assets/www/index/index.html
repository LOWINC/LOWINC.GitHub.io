<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  hello world
  <button id="flutter">webview counter: 0</button>
  <div id="info"></div>
</body>
<script>

  let webviewCount = 0

  // 向flutter发送事件
  const btn = document.querySelector('#flutter')

  btn.innerHTML = ___to_flutter || 'abc'

  btn.addEventListener('click', () => {

    window.___to_flutter.postMessage(webviewCount);
    webviewCount = webviewCount + 1;
    btn.innerHTML = `flutter counter: ${webviewCount}`
  })

  // 从flutter接收事件
  const info = document.querySelector('#info')
  window.___from_flutter = (message) => {
    info.innerHTML = `flutter counter: ${message}`;
  }



</script>


<script>
  // TODO

  // function handleFlutterEvent (jsonStr) {
  //   const { type, payload } = JSON.parse(jsonStr);
  //   console.log(`event from flutter: ${type}`, payload)
  // }

  // function setEventToFlutter ({ type: string, payload: any }) {
  //   const jsonStr = JSON.stringify(action)
  //   window.___to_flutter.postMessage(jsonStr)
  // }

</script>

</html>
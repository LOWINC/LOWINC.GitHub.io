(this.webpackJsonpundefined=this.webpackJsonpundefined||[]).push([[0],{202:function(e,n,t){"use strict";t.r(n);var a,c,o,r=t(0),l=t.n(r),i=t(3),m=t.n(i),p=t(14),s=t(60),u=t(4),d=t(19),v=t(204),E=t(90),f=t(205),y=t(55),b=t.n(y),x=function(e){var n=Object(f.a)({item:{name:e.name,type:e.name},end:function(n,t){var a=t.getDropResult();n&&a&&e.onEnd(n,a)},collect:function(e){return{isDragging:e.isDragging()}}}),t=Object(u.a)(n,2)[1];return l.a.createElement("div",{ref:t,className:b.a.component},l.a.createElement("button",{className:b.a.btn},e.children))},g=t(58),_=t.n(g),O=function(e){var n=Object(f.a)({item:{name:e.name,type:e.name},end:function(n,t){var a=t.getDropResult();n&&a&&e.onEnd(n,a)},collect:function(e){return{isDragging:e.isDragging()}}}),t=Object(u.a)(n,2)[1];return l.a.createElement("div",{ref:t,className:_.a.component},l.a.createElement("button",{className:_.a.btn},e.children))},j=t(85),T=t.n(j),N=function(e){var n={Banner:function(){return null},Card:function(){return l.a.createElement("div",null,l.a.createElement("input",{placeholder:"\u8bf7\u8f93\u5165\u4f1a\u5458\u5361id",type:"text",className:"val"}))},Goods:function(){return l.a.createElement("div",null,l.a.createElement("input",{placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1id",type:"text",className:"val"}))},Text:function(){return l.a.createElement("div",null,l.a.createElement("input",{placeholder:"\u8bf7\u8f93\u5165\u6587\u6848",type:"text",className:"val"}))}}[e.type],t="function"===typeof n?n():null;return l.a.createElement("div",{className:T.a.page},l.a.createElement("div",{className:"cell"},l.a.createElement("input",{placeholder:"\u8bf7\u8f93\u5165\u540d\u79f0",type:"text",className:"val"}),l.a.createElement("input",{placeholder:"\u8bf7\u8f93\u5165\u63cf\u8ff0",type:"text",className:"val"}),l.a.createElement("input",{placeholder:"\u8bf7\u8f93\u5165\u56fe\u7247",type:"text",className:"val"}),l.a.createElement("input",{placeholder:"\u8bf7\u8f93\u5165\u94fe\u63a5",type:"text",className:"val"})),l.a.createElement("div",null,t),l.a.createElement("button",{onClick:e.onConfirm},"\u66f4\u65b0"))},h=t(206),w=t(13);!function(e){e.Swiper="Swiper",e.Block="Block",e.Line="Line",e.Title="Title"}(c||(c={})),function(e){e.Goods="Goods",e.Card="Card",e.Banner="Banner",e.Text="Text"}(o||(o={}));var k=(a={},Object(w.a)(a,c.Swiper,{multiple:!0,elements:[o.Banner,o.Card]}),Object(w.a)(a,c.Block,{multiple:!0,elements:[o.Goods]}),Object(w.a)(a,c.Line,{multiple:!0,elements:[o.Goods]}),Object(w.a)(a,c.Title,{multiple:!1,elements:[o.Text]}),a),I=t(20),B=t(89),C=t.n(B),D=function(e){var n=e.index,t=e.move,a=Object(r.useRef)(null),c=Object(h.a)({accept:Object.keys(e.acceptType),hover:function(e,c){var o;if(a.current){var r=e.index,l=n;if(r!==l){var i=null===(o=a.current)||void 0===o?void 0:o.getBoundingClientRect(),m=(i.bottom-i.top)/2,p=c.getClientOffset().y-i.top;r<l&&p<m||r>l&&p>m||(t(r,l),e.index=l)}}}}),o=Object(u.a)(c,2)[1],i=Object(f.a)({item:{type:e.type,index:n},collect:function(e){return{isDragging:e.isDragging()}}});return(0,Object(u.a)(i,2)[1])(o(a)),l.a.createElement("div",{ref:a,className:C.a.position},e.children)},S=t(38),M=t.n(S),G=function(e){var n=Object(h.a)({accept:k[e.componentType].elements,drop:function(){return{index:e.index,name:"ReciverElement"}},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}),t=Object(u.a)(n,2)[1],a=function(n,t){e.onElementMove({componentIndex:e.index,dragIndex:n,hoverIndex:t})};return l.a.createElement("div",{ref:t,className:M.a.component},l.a.createElement("div",{className:M.a.box},l.a.createElement(I.AppointLayout,{componentType:e.componentType},e.value.map((function(n,t){return n?l.a.createElement(D,{key:"".concat(n.type,"-").concat(t),index:t,type:n.type,move:a,acceptType:o},l.a.createElement("div",{className:M.a.item,onClick:function(){return e.onElementSelect({elementIndex:t,elementType:n.type})}},e.componentType===c.Title&&l.a.createElement(I.Title,{name:"\u7ec4\u4ef6\uff1a".concat(e.componentType," / \u5143\u7d20\uff1a").concat(n.type),desc:"\u7ec4\u4ef6\uff1a".concat(e.componentType," / \u5143\u7d20\uff1a").concat(n.type)}),e.componentType===c.Line&&l.a.createElement(I.Line,{name:"\u7ec4\u4ef6\uff1a".concat(e.componentType," / \u5143\u7d20\uff1a").concat(n.type),desc:"\u7ec4\u4ef6\uff1a".concat(e.componentType," / \u5143\u7d20\uff1a").concat(n.type),img:"https://interest-image-dev.billbear.cn/dev/GOODS/tn-iEEAi-2tPTbMjX9CmotygqJ55YAx_08-x4WrFFPs=@big"}),e.componentType===c.Block&&l.a.createElement(I.Block,{name:"\u7ec4\u4ef6\uff1a".concat(e.componentType," / \u5143\u7d20\uff1a").concat(n.type),desc:"\u7ec4\u4ef6\uff1a".concat(e.componentType," / \u5143\u7d20\uff1a").concat(n.type),img:"https://interest-image-dev.billbear.cn/dev/GOODS/tn-iEEAi-2tPTbMjX9CmotygqJ55YAx_08-x4WrFFPs=@big"}),e.componentType===c.Swiper&&l.a.createElement(I.Banner,{name:"\u7ec4\u4ef6\uff1a".concat(e.componentType," / \u5143\u7d20\uff1a").concat(n.type),desc:"\u7ec4\u4ef6\uff1a".concat(e.componentType," / \u5143\u7d20\uff1a").concat(n.type),img:"https://interest-image-dev.billbear.cn/dev/GOODS/tn-iEEAi-2tPTbMjX9CmotygqJ55YAx_08-x4WrFFPs=@big"}))):null})))))},A=t(27),F=t.n(A),L=function(e){var n=Object(h.a)({accept:Object.keys(c),drop:function(){return{name:"ReciverMain"}},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}),t=Object(u.a)(n,2)[1];return l.a.createElement("div",{ref:t,className:F.a.component},l.a.createElement("div",{className:F.a.box},e.value.map((function(n,t){return n?l.a.createElement(D,{key:n.__key,index:t,type:n.type,acceptType:c,move:function(n,a){return e.onComponentMove({componentIndex:t,dragIndex:n,hoverIndex:a})}},l.a.createElement("div",{className:F.a.elementWrapper},n.type,l.a.createElement("div",{className:F.a.item},l.a.createElement(G,{index:t,componentType:n.type,value:n.value||[],onElementMove:e.onElementMove,onElementSelect:function(n){var a=n.elementIndex,c=n.elementType;return e.onElementSelect({elementIndex:a,elementType:c,componentIndex:t})}})))):null}))))};function R(e,n,t){return Object(d.a)(e,(function(e){var a=e[n],c=e[t];e[n]=c,e[t]=a}))}var W=t(8),P=t.n(W),J=function(){var e=Object(r.useState)({}),n=Object(u.a)(e,2),t=n[0],a=n[1],i=Object(r.useState)([]),m=Object(u.a)(i,2),f=m[0],y=m[1],b=function(e,n){var t=Object(d.a)(f,(function(n){return[].concat(Object(s.a)(n),[Object(p.a)(Object(p.a)({},e),{},{__key:(new Date).getTime()})])}));y(t.filter((function(e){return!!e})))},g=function(e,n){var t=f[n.index].type,a=k[t].multiple,c=Object(d.a)(f,(function(t){if(!a)return t[n.index].value=[Object(p.a)(Object(p.a)({},e),{},{__key:(new Date).getTime()})],t;var c=f[n.index].value||[],o=[].concat(Object(s.a)(c),[Object(p.a)(Object(p.a)({},e),{},{__key:(new Date).getTime()})]);return t[n.index].value=o,t}));y(c.filter((function(e){return!!e})))},_=[{Element:l.a.createElement(x,{name:c.Swiper,onEnd:b},c.Swiper)},{Element:l.a.createElement(x,{name:c.Title,onEnd:b},c.Title)},{Element:l.a.createElement(x,{name:c.Block,onEnd:b},c.Block)},{Element:l.a.createElement(x,{name:c.Line,onEnd:b},c.Line)}],j=[{Element:l.a.createElement(O,{name:o.Banner,onEnd:g},o.Banner)},{Element:l.a.createElement(O,{name:o.Card,onEnd:g},o.Card)},{Element:l.a.createElement(O,{name:o.Goods,onEnd:g},o.Goods)},{Element:l.a.createElement(O,{name:o.Text,onEnd:g},o.Text)}];return l.a.createElement(v.a,{backend:E.a},l.a.createElement("div",{className:P.a.page},l.a.createElement("div",{className:P.a.layout},l.a.createElement("div",{className:P.a.operater},l.a.createElement("div",{className:P.a.components},_.map((function(e,n){return l.a.createElement("div",{key:n},e.Element)}))),l.a.createElement("div",{className:P.a.elements},j.map((function(e,n){return l.a.createElement("div",{key:n},e.Element)})))),l.a.createElement("div",{className:P.a.preview},l.a.createElement("div",{className:P.a.json},l.a.createElement(L,{value:f,onElementMove:function(e){var n=e.componentIndex,t=e.dragIndex,a=e.hoverIndex;"number"===typeof t&&"number"===typeof a&&y(Object(d.a)(f,(function(e){e[n].value=R(f[n].value,t,a)})))},onElementSelect:function(e){a({componentIndex:e.componentIndex,elementIndex:e.elementIndex,elementType:e.elementType}),console.log(e)},onComponentMove:function(e){var n=e.dragIndex,t=e.hoverIndex;"number"===typeof n&&"number"===typeof t&&y(R(f,n,t))}}))),l.a.createElement("div",{className:P.a.form},l.a.createElement(N,{type:t.elementType,onConfirm:console.log})))))};var q=function(){return l.a.createElement("div",{className:"App"},l.a.createElement(J,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));m.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},27:function(e,n,t){e.exports={box:"reciver-main_box__Te1-j",item:"reciver-main_item__33peM",elementWrapper:"reciver-main_elementWrapper__389OI"}},38:function(e,n,t){e.exports={box:"reciver-element_box__F0elu"}},55:function(e,n,t){e.exports={btn:"component_btn__3xI-F"}},58:function(e,n,t){e.exports={btn:"element_btn__2MCOl"}},8:function(e,n,t){e.exports={layout:"jigsaw_layout__c2xAh",form:"jigsaw_form__1Io7R",operater:"jigsaw_operater__113OR",preview:"jigsaw_preview__3BObr",components:"jigsaw_components__2p1N8",elements:"jigsaw_elements__-dPss",iframe:"jigsaw_iframe__2MOlz"}},85:function(e,n,t){e.exports={page:"form_page__3mMIE"}},89:function(e,n,t){e.exports={position:"sort_position__1Fv_-",move:"sort_move__2x9ou"}},92:function(e,n,t){e.exports=t(202)}},[[92,1,2]]]);
//# sourceMappingURL=main.bd2efc71.chunk.js.map
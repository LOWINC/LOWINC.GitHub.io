(this.webpackJsonpundefined=this.webpackJsonpundefined||[]).push([[0],{18:function(e,a,t){e.exports={box:"reciver-main_box__Te1-j",item:"reciver-main_item__33peM",elementWrapper:"reciver-main_elementWrapper__389OI"}},28:function(e,a,t){e.exports={box:"reciver-element_box__F0elu"}},3:function(e,a,t){e.exports={"form-cell":"form_form-cell__1ji9n","form-label":"form_form-label__3h0FD","form-value":"form_form-value__uMANL",submit:"form_submit__28v-7"}},35:function(e,a,t){e.exports={btn:"component_btn__3xI-F"}},36:function(e,a,t){e.exports={btn:"element_btn__2MCOl"}},43:function(e,a,t){e.exports={position:"sort_position__1Fv_-",move:"sort_move__2x9ou"}},48:function(e,a,t){e.exports=t(97)},9:function(e,a,t){e.exports={layout:"jigsaw_layout__c2xAh",form:"jigsaw_form__1Io7R",operater:"jigsaw_operater__113OR",preview:"jigsaw_preview__3BObr",livePage:"jigsaw_livePage__219Q4",components:"jigsaw_components__2p1N8",elements:"jigsaw_elements__-dPss",iframe:"jigsaw_iframe__2MOlz",reset:"jigsaw_reset__2oXwJ"}},97:function(e,a,t){"use strict";t.r(a);var n,l=t(0),m=t.n(l),c=t(42),o=t.n(c),r=t(7),i=t(37),s=t(4),u=t(1),d=t(12),p=t(5),v=t.n(p),E=t(100),f=t(46),g=t(101),b=t(6),w=(n={},Object(b.a)(n,u.JigsawComponents.Swiper,{multiple:!0,elements:[u.JigsawElements.Card]}),Object(b.a)(n,u.JigsawComponents.Block,{multiple:!0,elements:[u.JigsawElements.Goods]}),Object(b.a)(n,u.JigsawComponents.Line,{multiple:!0,elements:[u.JigsawElements.Goods,u.JigsawElements.Banner]}),Object(b.a)(n,u.JigsawComponents.Title,{multiple:!1,elements:[u.JigsawElements.Text]}),Object(b.a)(n,u.JigsawComponents.Big,{elements:[u.JigsawElements.Goods,u.JigsawElements.Banner],multiple:!0}),Object(b.a)(n,u.JigsawComponents.Roll,{elements:[u.JigsawElements.Goods,u.JigsawElements.Banner],multiple:!0}),Object(b.a)(n,u.JigsawComponents.Cube,{elements:[u.JigsawElements.Goods,u.JigsawElements.Banner],multiple:!0}),Object(b.a)(n,u.JigsawComponents.CubeRow4,{elements:[u.JigsawElements.Goods,u.JigsawElements.Banner],multiple:!0}),n),N=t(10),O=t(102),j=t(43),C=t.n(j),y=function(e){var a=e.index,t=e.move,n=Object(l.useRef)(null),c=Object(g.a)({accept:Object.keys(e.acceptType),hover:function(e,l){var m;if(n.current){var c=e.index,o=a;if(c!==o){var r=null===(m=n.current)||void 0===m?void 0:m.getBoundingClientRect(),i=(r.bottom-r.top)/2,s=l.getClientOffset().y-r.top;c<o&&s<i||c>o&&s>i||(t(c,o),e.index=o)}}}}),o=Object(s.a)(c,2)[1],r=Object(O.a)({item:{type:e.type,index:a},collect:function(e){return{isDragging:e.isDragging()}}});return(0,Object(s.a)(r,2)[1])(o(n)),m.a.createElement("div",{ref:n,className:C.a.position},e.children)},x=t(28),J=t.n(x),_=function(e){var a=Object(g.a)({accept:w[e.componentType].elements,drop:function(){return{index:e.index,name:"ReciverElement"}},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}),t=Object(s.a)(a,2)[1],n=function(a,t){e.onElementMove({componentIndex:e.index,dragIndex:a,hoverIndex:t})};return m.a.createElement("div",{ref:t,className:J.a.component},m.a.createElement("div",{className:J.a.box},m.a.createElement(N.a,{componentType:e.componentType},e.value.map((function(a,t){return a?m.a.createElement(y,{key:"".concat(a.type,"-").concat(t),index:t,type:a.type,move:n,acceptType:u.JigsawElements},m.a.createElement("div",{className:J.a.item,onClick:function(){return e.onElementSelect({elementIndex:t,elementType:a.type})}},e.componentType===u.JigsawComponents.Roll&&m.a.createElement(N.g,{name:v()(e.value[t],"value.title"),desc:v()(e.value[t],"value.desc"),img:v()(e.value[t],"value.img")}),e.componentType===u.JigsawComponents.Big&&m.a.createElement(N.c,{name:v()(e.value[t],"value.title"),desc:v()(e.value[t],"value.desc"),img:v()(e.value[t],"value.img")}),e.componentType===u.JigsawComponents.Cube&&m.a.createElement(N.e,{img:v()(e.value[t],"value.img")}),e.componentType===u.JigsawComponents.CubeRow4&&m.a.createElement(N.e,{img:v()(e.value[t],"value.img")}),e.componentType===u.JigsawComponents.Title&&m.a.createElement(N.h,{name:v()(e.value[t],"value.title","\u8bf7\u8f93\u5165\u6807\u9898"),desc:v()(e.value[t],"value.desc")}),e.componentType===u.JigsawComponents.Line&&m.a.createElement(N.f,{name:v()(e.value[t],"value.title"),desc:v()(e.value[t],"value.desc"),img:v()(e.value[t],"value.img")}),e.componentType===u.JigsawComponents.Block&&m.a.createElement(N.d,{name:v()(e.value[t],"value.title"),desc:v()(e.value[t],"value.desc"),img:v()(e.value[t],"value.img")}),e.componentType===u.JigsawComponents.Swiper&&m.a.createElement(N.b,{img:v()(e.value[t],"value.img")}))):null})))))},h=t(18),I=t.n(h),T=function(e){var a=Object(g.a)({accept:Object.keys(u.JigsawComponents),drop:function(){return{name:"ReciverMain"}},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}),t=Object(s.a)(a,2)[1];return m.a.createElement("div",{ref:t,className:I.a.component},m.a.createElement("div",{className:I.a.box},e.value.map((function(a,t){return a?m.a.createElement(y,{key:a.__key,index:t,type:a.type,acceptType:u.JigsawComponents,move:function(a,n){return e.onComponentMove({componentIndex:t,dragIndex:a,hoverIndex:n})}},m.a.createElement("div",{className:I.a.elementWrapper},a.type,m.a.createElement("div",{className:I.a.item},m.a.createElement(_,{index:t,componentType:a.type,value:a.value||[],onElementMove:e.onElementMove,onElementSelect:function(a){var n=a.elementIndex,l=a.elementType;return e.onElementSelect({elementIndex:n,elementType:l,componentIndex:t})}})))):null}))))};function S(e){var a=Object(l.useState)([]),t=Object(s.a)(a,2),n=t[0],m=t[1];return Object(l.useEffect)((function(){var e=function(){try{var e=localStorage.getItem("cache-data")||"[]";return JSON.parse(e)}catch(a){return[]}}();console.log("data:",e),m(e)}),[]),Object(l.useEffect)((function(){0!==e.length&&localStorage.setItem("cache-data",JSON.stringify(e))}),[e]),{data:n,clear:function(){localStorage.setItem("cache-data",JSON.stringify([])),m([])}}}var k=t(45),D=t(9),B=t.n(D),M=t(35),R=t.n(M),G=function(e){var a=Object(O.a)({item:{name:e.name,type:e.name},end:function(a,t){var n=t.getDropResult();a&&n&&e.onEnd(a,n)},collect:function(e){return{isDragging:e.isDragging()}}}),t=Object(s.a)(a,2)[1];return m.a.createElement("div",{ref:t,className:R.a.component},m.a.createElement("button",{className:R.a.btn},e.children))},P=function(e){var a=e.handleComponentDropEnd,t=[{Element:m.a.createElement("div",null,m.a.createElement(G,{name:u.JigsawComponents.Swiper,onEnd:a},u.JigsawComponentsName[u.JigsawComponents.Swiper]))},{Element:m.a.createElement(G,{name:u.JigsawComponents.Title,onEnd:a},u.JigsawComponentsName[u.JigsawComponents.Title])},{Element:m.a.createElement(G,{name:u.JigsawComponents.Block,onEnd:a},u.JigsawComponentsName[u.JigsawComponents.Block])},{Element:m.a.createElement(G,{name:u.JigsawComponents.Line,onEnd:a},u.JigsawComponentsName[u.JigsawComponents.Line])},{Element:m.a.createElement(G,{name:u.JigsawComponents.Big,onEnd:a},u.JigsawComponentsName[u.JigsawComponents.Big])},{Element:m.a.createElement(G,{name:u.JigsawComponents.Roll,onEnd:a},u.JigsawComponentsName[u.JigsawComponents.Roll])},{Element:m.a.createElement(G,{name:u.JigsawComponents.Cube,onEnd:a},u.JigsawComponentsName[u.JigsawComponents.Cube])},{Element:m.a.createElement(G,{name:u.JigsawComponents.CubeRow4,onEnd:a},u.JigsawComponentsName[u.JigsawComponents.CubeRow4])}];return m.a.createElement("div",null,m.a.createElement("div",{className:"title"},"\u5916\u58f3"),t.map((function(e,a){return m.a.createElement("div",{key:a},e.Element)})))},A=t(36),W=t.n(A),L=function(e){var a=Object(O.a)({item:{name:e.name,type:e.name},end:function(a,t){var n=t.getDropResult();a&&n&&e.onEnd(a,n)},collect:function(e){return{isDragging:e.isDragging()}}}),t=Object(s.a)(a,2)[1];return m.a.createElement("div",{ref:t,className:W.a.component},m.a.createElement("button",{className:W.a.btn},e.children))},F=function(e){var a=e.handleElementDropEnd,t=[{Element:m.a.createElement(L,{name:u.JigsawElements.Banner,onEnd:a},u.JigsawElementsName[u.JigsawElements.Banner])},{Element:m.a.createElement(L,{name:u.JigsawElements.Card,onEnd:a},u.JigsawElementsName[u.JigsawElements.Card])},{Element:m.a.createElement(L,{name:u.JigsawElements.Goods,onEnd:a},u.JigsawElementsName[u.JigsawElements.Goods])},{Element:m.a.createElement(L,{name:u.JigsawElements.Text,onEnd:a},u.JigsawElementsName[u.JigsawElements.Text])}];return m.a.createElement("div",null,m.a.createElement("div",{className:"title"},"\u5143\u7d20"),t.map((function(e,a){return m.a.createElement("div",{key:a},e.Element)})))},U=t(3),z=t.n(U),Q=function(e){var a=Object(l.useState)(e.data),t=Object(s.a)(a,2),n=t[0],c=t[1];Object(l.useEffect)((function(){return c(e.data),function(){return c({})}}),[e.data]);var o=function(e){return function(a){return c(Object(r.a)(Object(r.a)({},n),{},Object(b.a)({},e,a.target.value)))}};return m.a.createElement("div",{className:"form"},m.a.createElement("div",{className:z.a["form-cell"]},m.a.createElement("div",{className:z.a["form-label"]},"\u6807\u9898"),m.a.createElement("input",{type:"text",className:z.a["form-value"],value:n.title,placeholder:"\u8bf7\u8f93\u5165\u6807\u9898",onChange:o("title")})),m.a.createElement("div",{className:z.a["form-cell"]},m.a.createElement("div",{className:z.a["form-label"]},"\u63cf\u8ff0"),m.a.createElement("input",{type:"text",className:z.a["form-value"],value:n.desc,placeholder:"\u8bf7\u8f93\u5165\u63cf\u8ff0",onChange:o("desc")})),m.a.createElement("div",{className:z.a["form-cell"]},m.a.createElement("div",{className:z.a["form-label"]},"\u56fe\u7247"),m.a.createElement("input",{type:"text",className:z.a["form-value"],value:n.img,placeholder:"\u8bf7\u8f93\u5165\u56fe\u7247",onChange:o("img")})),m.a.createElement("div",{className:z.a["form-cell"]},m.a.createElement("div",{className:z.a["form-label"]},"\u94fe\u63a5"),m.a.createElement("input",{type:"text",className:z.a["form-value"],value:n.link,placeholder:"\u8bf7\u8f93\u5165\u94fe\u63a5",onChange:o("link")})),m.a.createElement("button",{className:z.a.submit,onClick:function(){e.onSubmit(n)}},"\u786e\u5b9a"))},V=function(e){var a=Object(l.useState)(e.data),t=Object(s.a)(a,2),n=t[0],c=t[1];Object(l.useEffect)((function(){return c(e.data),function(){return c({})}}),[e.data]);var o=function(e){return function(a){return c(Object(r.a)(Object(r.a)({},n),{},Object(b.a)({},e,a.target.value)))}};return m.a.createElement("div",{className:"form"},m.a.createElement("div",{className:z.a["form-cell"]},m.a.createElement("div",{className:z.a["form-label"]},"\u6807\u9898"),m.a.createElement("input",{type:"text",className:z.a["form-value"],value:n.vipCardId,placeholder:"\u8bf7\u8f93\u5165\u4f1a\u5458\u5361id",onChange:o("vipCardId")})),m.a.createElement("div",{className:z.a["form-cell"]},m.a.createElement("div",{className:z.a["form-label"]},"\u6807\u9898"),m.a.createElement("input",{type:"text",className:z.a["form-value"],value:n.title,placeholder:"\u8bf7\u8f93\u5165\u6807\u9898",onChange:o("title")})),m.a.createElement("div",{className:z.a["form-cell"]},m.a.createElement("div",{className:z.a["form-label"]},"\u63cf\u8ff0"),m.a.createElement("input",{type:"text",className:z.a["form-value"],value:n.desc,placeholder:"\u8bf7\u8f93\u5165\u63cf\u8ff0",onChange:o("desc")})),m.a.createElement("div",{className:z.a["form-cell"]},m.a.createElement("div",{className:z.a["form-label"]},"\u56fe\u7247"),m.a.createElement("input",{type:"text",className:z.a["form-value"],value:n.img,placeholder:"\u8bf7\u8f93\u5165\u56fe\u7247",onChange:o("img")})),m.a.createElement("div",{className:z.a["form-cell"]},m.a.createElement("div",{className:z.a["form-label"]},"\u94fe\u63a5"),m.a.createElement("input",{type:"text",className:z.a["form-value"],value:n.link,placeholder:"\u8bf7\u8f93\u5165\u94fe\u63a5",onChange:o("link")})),m.a.createElement("button",{className:z.a.submit,onClick:function(){e.onSubmit(n)}},"\u786e\u5b9a"))},X=function(e){var a=Object(l.useState)(e.data),t=Object(s.a)(a,2),n=t[0],c=t[1];Object(l.useEffect)((function(){return c(e.data),function(){return c({})}}),[e.data]);var o=function(e){return function(a){return c(Object(r.a)(Object(r.a)({},n),{},Object(b.a)({},e,a.target.value)))}};return m.a.createElement("div",{className:"form"},m.a.createElement("div",{className:z.a["form-cell"]},m.a.createElement("div",{className:z.a["form-label"]},"\u6807\u9898"),m.a.createElement("input",{type:"text",className:z.a["form-value"],value:n.goodsId,placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1id",onChange:o("goodsId")})),m.a.createElement("div",{className:z.a["form-cell"]},m.a.createElement("div",{className:z.a["form-label"]},"\u6807\u9898"),m.a.createElement("input",{type:"text",className:z.a["form-value"],value:n.title,placeholder:"\u8bf7\u8f93\u5165\u6807\u9898",onChange:o("title")})),m.a.createElement("div",{className:z.a["form-cell"]},m.a.createElement("div",{className:z.a["form-label"]},"\u63cf\u8ff0"),m.a.createElement("input",{type:"text",className:z.a["form-value"],value:n.desc,placeholder:"\u8bf7\u8f93\u5165\u63cf\u8ff0",onChange:o("desc")})),m.a.createElement("div",{className:z.a["form-cell"]},m.a.createElement("div",{className:z.a["form-label"]},"\u56fe\u7247"),m.a.createElement("input",{type:"text",className:z.a["form-value"],value:n.img,placeholder:"\u8bf7\u8f93\u5165\u56fe\u7247",onChange:o("img")})),m.a.createElement("div",{className:z.a["form-cell"]},m.a.createElement("div",{className:z.a["form-label"]},"\u94fe\u63a5"),m.a.createElement("input",{type:"text",className:z.a["form-value"],value:n.link,placeholder:"\u8bf7\u8f93\u5165\u94fe\u63a5",onChange:o("link")})),m.a.createElement("button",{className:z.a.submit,onClick:function(){e.onSubmit(n)}},"\u786e\u5b9a"))},$=function(e){var a=Object(l.useState)(e.data),t=Object(s.a)(a,2),n=t[0],c=t[1];Object(l.useEffect)((function(){return c(e.data),function(){return c({})}}),[e.data]);var o=function(e){return function(a){return c(Object(r.a)(Object(r.a)({},n),{},Object(b.a)({},e,a.target.value)))}};return m.a.createElement("div",{className:"form"},m.a.createElement("div",{className:z.a["form-cell"]},m.a.createElement("div",{className:z.a["form-label"]},"\u6807\u9898"),m.a.createElement("input",{type:"text",className:z.a["form-value"],value:n.title,placeholder:"\u8bf7\u8f93\u5165\u6807\u9898",onChange:o("title")})),m.a.createElement("div",{className:z.a["form-cell"]},m.a.createElement("div",{className:z.a["form-label"]},"\u63cf\u8ff0"),m.a.createElement("input",{type:"text",className:z.a["form-value"],value:n.desc,placeholder:"\u8bf7\u8f93\u5165\u63cf\u8ff0",onChange:o("desc")})),m.a.createElement("button",{className:z.a.submit,onClick:function(){e.onSubmit(n)}},"\u786e\u5b9a"))},q=function(e){var a=e.data,t=e.type,n=e.onSubmit;return console.log(a),m.a.createElement("div",null,t===u.JigsawElements.Banner&&m.a.createElement(Q,{data:a,onSubmit:n}),t===u.JigsawElements.Card&&m.a.createElement(V,{data:a,onSubmit:n}),t===u.JigsawElements.Goods&&m.a.createElement(X,{data:a,onSubmit:n}),t===u.JigsawElements.Text&&m.a.createElement($,{data:a,onSubmit:n}))},H=new function e(){var a=this;Object(k.a)(this,e),this.iframe=void 0,this.postMessage=function(e){a.iframe?a.iframe.contentWindow.postMessage(e,"*"):console.error("\u6ca1\u6709\u627e\u5230iframe")},this.find=function(e){a.iframe=document.getElementById(e)},this.postData=function(e){a.postMessage({type:"UPDATE_DATA",payload:e})},this.postEvent=function(e){a.postMessage({type:"UPDATE_EVENT",payload:e})}},K=function(){var e=Object(l.useState)([]),a=Object(s.a)(e,2),t=a[0],n=a[1],c=Object(l.useState)({}),o=Object(s.a)(c,2),p=o[0],g=o[1],b=Object(l.useMemo)((function(){return v()(t[p.componentIndex],"value[".concat(p.elementIndex,"].value"),{})}),[t,p.componentIndex,p.elementIndex]),N=S(t);Object(l.useEffect)((function(){n(N.data)}),[N.data]),Object(l.useEffect)((function(){H.find("livePage")}),[]),Object(l.useEffect)((function(){H.postData(t)}),[t]);return m.a.createElement(E.a,{backend:f.a},m.a.createElement("div",{className:B.a.page},m.a.createElement("div",{className:B.a.layout},m.a.createElement("div",{className:B.a.operater},m.a.createElement("div",null,"\u64cd\u4f5c"),m.a.createElement("button",{className:B.a.reset,onClick:N.clear},"\u91cd\u7f6e"),m.a.createElement("div",{className:B.a.components},m.a.createElement(P,{handleComponentDropEnd:function(e,a){var l=Object(d.default)(t,(function(a){return[].concat(Object(i.a)(a),[Object(r.a)(Object(r.a)({},e),{},{__key:(new Date).getTime()})])}));n(l.filter((function(e){return!!e})))}})),m.a.createElement("div",{className:B.a.elements},m.a.createElement(F,{handleElementDropEnd:function(e,a){if(void 0!==a.index){var l=t[a.index].type,m=w[l].multiple,c=Object(d.default)(t,(function(n){if(!m)return n[a.index].value=[Object(r.a)(Object(r.a)({},e),{},{__key:(new Date).getTime(),value:[]})],n;var l=t[a.index].value||[],c=[].concat(Object(i.a)(l),[Object(r.a)(Object(r.a)({},e),{},{__key:(new Date).getTime(),value:[]})]);return n[a.index].value=c,n}));n(c.filter((function(e){return!!e})))}}}))),m.a.createElement("div",{className:B.a.preview},m.a.createElement("div",{className:B.a.json},m.a.createElement(T,{value:t,onElementMove:function(e){var a=e.componentIndex,l=e.dragIndex,m=e.hoverIndex;"number"===typeof l&&"number"===typeof m&&n(Object(d.default)(t,(function(e){e[a].value=Object(u.swap)(t[a].value,l,m)})))},onElementSelect:function(e){g({componentIndex:e.componentIndex,elementIndex:e.elementIndex,elementType:e.elementType})},onComponentMove:function(e){var a=e.dragIndex,l=e.hoverIndex;"number"===typeof a&&"number"===typeof l&&n(Object(u.swap)(t,a,l))}}))),m.a.createElement("div",{className:B.a.form},m.a.createElement("div",null,"\u5185\u5bb9"),m.a.createElement(q,{data:b,type:p.elementType,onSubmit:function(e){n(Object(d.default)(t,(function(a){a[p.componentIndex].value[p.elementIndex].value=e})))}})),m.a.createElement("div",{className:B.a.livePage},m.a.createElement("div",null,"\u9884\u89c8"),m.a.createElement("iframe",{id:"livePage",src:"https://lowinc.github.io/mobile/index.html",title:"livePage",className:B.a.iframe})))))};var Y=function(){return m.a.createElement("div",{className:"App"},m.a.createElement(K,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(m.a.createElement(m.a.StrictMode,null,m.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[48,1,2]]]);
//# sourceMappingURL=main.b15ac5f2.chunk.js.map
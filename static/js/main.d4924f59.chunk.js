(this.webpackJsonpundefined=this.webpackJsonpundefined||[]).push([[0],{18:function(e,a,t){e.exports={box:"reciver-main_box__Te1-j",item:"reciver-main_item__33peM",elementWrapper:"reciver-main_elementWrapper__389OI"}},2:function(e,a,t){e.exports={"form-cell":"form_form-cell__1ji9n","form-label":"form_form-label__3h0FD","form-value":"form_form-value__uMANL",submit:"form_submit__28v-7"}},28:function(e,a,t){e.exports={box:"reciver-element_box__F0elu"}},35:function(e,a,t){e.exports={btn:"component_btn__3xI-F"}},36:function(e,a,t){e.exports={btn:"element_btn__2MCOl"}},43:function(e,a,t){e.exports={position:"sort_position__1Fv_-",move:"sort_move__2x9ou"}},48:function(e,a,t){e.exports=t(95)},9:function(e,a,t){e.exports={layout:"jigsaw_layout__c2xAh",form:"jigsaw_form__1Io7R",operater:"jigsaw_operater__113OR",preview:"jigsaw_preview__3BObr",components:"jigsaw_components__2p1N8",elements:"jigsaw_elements__-dPss",iframe:"jigsaw_iframe__2MOlz",reset:"jigsaw_reset__2oXwJ"}},95:function(e,a,t){"use strict";t.r(a);var n,l=t(0),c=t.n(l),o=t(42),r=t.n(o),m=t(5),i=t(37),s=t(4),u=t(3),d=t(11),p=t(8),v=t.n(p),f=t(98),E=t(46),b=t(99),g=t(6),N=(n={},Object(g.a)(n,u.JigsawComponents.Swiper,{multiple:!0,elements:[u.JigsawElements.Card]}),Object(g.a)(n,u.JigsawComponents.Block,{multiple:!0,elements:[u.JigsawElements.Goods]}),Object(g.a)(n,u.JigsawComponents.Line,{multiple:!0,elements:[u.JigsawElements.Goods,u.JigsawElements.Banner]}),Object(g.a)(n,u.JigsawComponents.Title,{multiple:!1,elements:[u.JigsawElements.Text]}),n),O=t(13),j=t(100),x=t(43),y=t.n(x),h=function(e){var a=e.index,t=e.move,n=Object(l.useRef)(null),o=Object(b.a)({accept:Object.keys(e.acceptType),hover:function(e,l){var c;if(n.current){var o=e.index,r=a;if(o!==r){var m=null===(c=n.current)||void 0===c?void 0:c.getBoundingClientRect(),i=(m.bottom-m.top)/2,s=l.getClientOffset().y-m.top;o<r&&s<i||o>r&&s>i||(t(o,r),e.index=r)}}}}),r=Object(s.a)(o,2)[1],m=Object(j.a)({item:{type:e.type,index:a},collect:function(e){return{isDragging:e.isDragging()}}});return(0,Object(s.a)(m,2)[1])(r(n)),c.a.createElement("div",{ref:n,className:y.a.position},e.children)},_=t(28),w=t.n(_),C=function(e){var a=Object(b.a)({accept:N[e.componentType].elements,drop:function(){return{index:e.index,name:"ReciverElement"}},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}),t=Object(s.a)(a,2)[1],n=function(a,t){e.onElementMove({componentIndex:e.index,dragIndex:a,hoverIndex:t})};return c.a.createElement("div",{ref:t,className:w.a.component},c.a.createElement("div",{className:w.a.box},c.a.createElement(O.a,{componentType:e.componentType},e.value.map((function(a,t){return a?c.a.createElement(h,{key:"".concat(a.type,"-").concat(t),index:t,type:a.type,move:n,acceptType:u.JigsawElements},c.a.createElement("div",{className:w.a.item,onClick:function(){return e.onElementSelect({elementIndex:t,elementType:a.type})}},e.componentType===u.JigsawComponents.Title&&c.a.createElement(O.e,{name:v()(e.value[t],"value.title","\u8bf7\u8f93\u5165\u6807\u9898"),desc:v()(e.value[t],"value.desc")}),e.componentType===u.JigsawComponents.Line&&c.a.createElement(O.d,{name:v()(e.value[t],"value.title"),desc:v()(e.value[t],"value.desc"),img:v()(e.value[t],"value.img")}),e.componentType===u.JigsawComponents.Block&&c.a.createElement(O.c,{name:v()(e.value[t],"value.title"),desc:v()(e.value[t],"value.desc"),img:v()(e.value[t],"value.img")}),e.componentType===u.JigsawComponents.Swiper&&c.a.createElement(O.b,{img:v()(e.value[t],"value.img")}))):null})))))},J=t(18),I=t.n(J),T=function(e){var a=Object(b.a)({accept:Object.keys(u.JigsawComponents),drop:function(){return{name:"ReciverMain"}},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}),t=Object(s.a)(a,2)[1];return c.a.createElement("div",{ref:t,className:I.a.component},c.a.createElement("div",{className:I.a.box},e.value.map((function(a,t){return a?c.a.createElement(h,{key:a.__key,index:t,type:a.type,acceptType:u.JigsawComponents,move:function(a,n){return e.onComponentMove({componentIndex:t,dragIndex:a,hoverIndex:n})}},c.a.createElement("div",{className:I.a.elementWrapper},a.type,c.a.createElement("div",{className:I.a.item},c.a.createElement(C,{index:t,componentType:a.type,value:a.value||[],onElementMove:e.onElementMove,onElementSelect:function(a){var n=a.elementIndex,l=a.elementType;return e.onElementSelect({elementIndex:n,elementType:l,componentIndex:t})}})))):null}))))};function S(e){var a=Object(l.useState)([]),t=Object(s.a)(a,2),n=t[0],c=t[1];return Object(l.useEffect)((function(){var e=function(){try{var e=localStorage.getItem("cache-data")||"[]";return JSON.parse(e)}catch(a){return[]}}();console.log("data:",e),c(e)}),[]),Object(l.useEffect)((function(){0!==e.length&&localStorage.setItem("cache-data",JSON.stringify(e))}),[e]),{data:n,clear:function(){localStorage.setItem("cache-data",JSON.stringify([])),c([])}}}var k=t(45),D=t(9),M=t.n(D),B=t(35),R=t.n(B),A=function(e){var a=Object(j.a)({item:{name:e.name,type:e.name},end:function(a,t){var n=t.getDropResult();a&&n&&e.onEnd(a,n)},collect:function(e){return{isDragging:e.isDragging()}}}),t=Object(s.a)(a,2)[1];return c.a.createElement("div",{ref:t,className:R.a.component},c.a.createElement("button",{className:R.a.btn},e.children))},P=function(e){var a=e.handleComponentDropEnd,t=[{Element:c.a.createElement(A,{name:u.JigsawComponents.Swiper,onEnd:a},u.JigsawComponents.Swiper)},{Element:c.a.createElement(A,{name:u.JigsawComponents.Title,onEnd:a},u.JigsawComponents.Title)},{Element:c.a.createElement(A,{name:u.JigsawComponents.Block,onEnd:a},u.JigsawComponents.Block)},{Element:c.a.createElement(A,{name:u.JigsawComponents.Line,onEnd:a},u.JigsawComponents.Line)}];return c.a.createElement("div",null,t.map((function(e,a){return c.a.createElement("div",{key:a},e.Element)})))},W=t(36),G=t.n(W),L=function(e){var a=Object(j.a)({item:{name:e.name,type:e.name},end:function(a,t){var n=t.getDropResult();a&&n&&e.onEnd(a,n)},collect:function(e){return{isDragging:e.isDragging()}}}),t=Object(s.a)(a,2)[1];return c.a.createElement("div",{ref:t,className:G.a.component},c.a.createElement("button",{className:G.a.btn},e.children))},F=function(e){var a=e.handleElementDropEnd,t=[{Element:c.a.createElement(L,{name:u.JigsawElements.Banner,onEnd:a},u.JigsawElements.Banner)},{Element:c.a.createElement(L,{name:u.JigsawElements.Card,onEnd:a},u.JigsawElements.Card)},{Element:c.a.createElement(L,{name:u.JigsawElements.Goods,onEnd:a},u.JigsawElements.Goods)},{Element:c.a.createElement(L,{name:u.JigsawElements.Text,onEnd:a},u.JigsawElements.Text)}];return c.a.createElement("div",null,t.map((function(e,a){return c.a.createElement("div",{key:a},e.Element)})))},U=t(2),z=t.n(U),V=function(e){var a=Object(l.useState)(e.data),t=Object(s.a)(a,2),n=t[0],o=t[1];Object(l.useEffect)((function(){return o(e.data),function(){return o({})}}),[e.data]);var r=function(e){return function(a){return o(Object(m.a)(Object(m.a)({},n),{},Object(g.a)({},e,a.target.value)))}};return c.a.createElement("div",{className:"form"},c.a.createElement("div",{className:z.a["form-cell"]},c.a.createElement("div",{className:z.a["form-label"]},"\u6807\u9898"),c.a.createElement("input",{type:"text",className:z.a["form-value"],value:n.title,placeholder:"\u8bf7\u8f93\u5165\u6807\u9898",onChange:r("title")})),c.a.createElement("div",{className:z.a["form-cell"]},c.a.createElement("div",{className:z.a["form-label"]},"\u63cf\u8ff0"),c.a.createElement("input",{type:"text",className:z.a["form-value"],value:n.desc,placeholder:"\u8bf7\u8f93\u5165\u63cf\u8ff0",onChange:r("desc")})),c.a.createElement("div",{className:z.a["form-cell"]},c.a.createElement("div",{className:z.a["form-label"]},"\u56fe\u7247"),c.a.createElement("input",{type:"text",className:z.a["form-value"],value:n.img,placeholder:"\u8bf7\u8f93\u5165\u56fe\u7247",onChange:r("img")})),c.a.createElement("div",{className:z.a["form-cell"]},c.a.createElement("div",{className:z.a["form-label"]},"\u94fe\u63a5"),c.a.createElement("input",{type:"text",className:z.a["form-value"],value:n.link,placeholder:"\u8bf7\u8f93\u5165\u94fe\u63a5",onChange:r("link")})),c.a.createElement("button",{className:z.a.submit,onClick:function(){e.onSubmit(n)}},"\u786e\u5b9a"))},X=function(e){var a=Object(l.useState)(e.data),t=Object(s.a)(a,2),n=t[0],o=t[1];Object(l.useEffect)((function(){return o(e.data),function(){return o({})}}),[e.data]);var r=function(e){return function(a){return o(Object(m.a)(Object(m.a)({},n),{},Object(g.a)({},e,a.target.value)))}};return c.a.createElement("div",{className:"form"},c.a.createElement("div",{className:z.a["form-cell"]},c.a.createElement("div",{className:z.a["form-label"]},"\u6807\u9898"),c.a.createElement("input",{type:"text",className:z.a["form-value"],value:n.vipCardId,placeholder:"\u8bf7\u8f93\u5165\u4f1a\u5458\u5361id",onChange:r("vipCardId")})),c.a.createElement("div",{className:z.a["form-cell"]},c.a.createElement("div",{className:z.a["form-label"]},"\u6807\u9898"),c.a.createElement("input",{type:"text",className:z.a["form-value"],value:n.title,placeholder:"\u8bf7\u8f93\u5165\u6807\u9898",onChange:r("title")})),c.a.createElement("div",{className:z.a["form-cell"]},c.a.createElement("div",{className:z.a["form-label"]},"\u63cf\u8ff0"),c.a.createElement("input",{type:"text",className:z.a["form-value"],value:n.desc,placeholder:"\u8bf7\u8f93\u5165\u63cf\u8ff0",onChange:r("desc")})),c.a.createElement("div",{className:z.a["form-cell"]},c.a.createElement("div",{className:z.a["form-label"]},"\u56fe\u7247"),c.a.createElement("input",{type:"text",className:z.a["form-value"],value:n.img,placeholder:"\u8bf7\u8f93\u5165\u56fe\u7247",onChange:r("img")})),c.a.createElement("div",{className:z.a["form-cell"]},c.a.createElement("div",{className:z.a["form-label"]},"\u94fe\u63a5"),c.a.createElement("input",{type:"text",className:z.a["form-value"],value:n.link,placeholder:"\u8bf7\u8f93\u5165\u94fe\u63a5",onChange:r("link")})),c.a.createElement("button",{className:z.a.submit,onClick:function(){e.onSubmit(n)}},"\u786e\u5b9a"))},$=function(e){var a=Object(l.useState)(e.data),t=Object(s.a)(a,2),n=t[0],o=t[1];Object(l.useEffect)((function(){return o(e.data),function(){return o({})}}),[e.data]);var r=function(e){return function(a){return o(Object(m.a)(Object(m.a)({},n),{},Object(g.a)({},e,a.target.value)))}};return c.a.createElement("div",{className:"form"},c.a.createElement("div",{className:z.a["form-cell"]},c.a.createElement("div",{className:z.a["form-label"]},"\u6807\u9898"),c.a.createElement("input",{type:"text",className:z.a["form-value"],value:n.goodsId,placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1id",onChange:r("goodsId")})),c.a.createElement("div",{className:z.a["form-cell"]},c.a.createElement("div",{className:z.a["form-label"]},"\u6807\u9898"),c.a.createElement("input",{type:"text",className:z.a["form-value"],value:n.title,placeholder:"\u8bf7\u8f93\u5165\u6807\u9898",onChange:r("title")})),c.a.createElement("div",{className:z.a["form-cell"]},c.a.createElement("div",{className:z.a["form-label"]},"\u63cf\u8ff0"),c.a.createElement("input",{type:"text",className:z.a["form-value"],value:n.desc,placeholder:"\u8bf7\u8f93\u5165\u63cf\u8ff0",onChange:r("desc")})),c.a.createElement("div",{className:z.a["form-cell"]},c.a.createElement("div",{className:z.a["form-label"]},"\u56fe\u7247"),c.a.createElement("input",{type:"text",className:z.a["form-value"],value:n.img,placeholder:"\u8bf7\u8f93\u5165\u56fe\u7247",onChange:r("img")})),c.a.createElement("div",{className:z.a["form-cell"]},c.a.createElement("div",{className:z.a["form-label"]},"\u94fe\u63a5"),c.a.createElement("input",{type:"text",className:z.a["form-value"],value:n.link,placeholder:"\u8bf7\u8f93\u5165\u94fe\u63a5",onChange:r("link")})),c.a.createElement("button",{className:z.a.submit,onClick:function(){e.onSubmit(n)}},"\u786e\u5b9a"))},q=function(e){var a=Object(l.useState)(e.data),t=Object(s.a)(a,2),n=t[0],o=t[1];Object(l.useEffect)((function(){return o(e.data),function(){return o({})}}),[e.data]);var r=function(e){return function(a){return o(Object(m.a)(Object(m.a)({},n),{},Object(g.a)({},e,a.target.value)))}};return c.a.createElement("div",{className:"form"},c.a.createElement("div",{className:z.a["form-cell"]},c.a.createElement("div",{className:z.a["form-label"]},"\u6807\u9898"),c.a.createElement("input",{type:"text",className:z.a["form-value"],value:n.title,placeholder:"\u8bf7\u8f93\u5165\u6807\u9898",onChange:r("title")})),c.a.createElement("div",{className:z.a["form-cell"]},c.a.createElement("div",{className:z.a["form-label"]},"\u63cf\u8ff0"),c.a.createElement("input",{type:"text",className:z.a["form-value"],value:n.desc,placeholder:"\u8bf7\u8f93\u5165\u63cf\u8ff0",onChange:r("desc")})),c.a.createElement("button",{className:z.a.submit,onClick:function(){e.onSubmit(n)}},"\u786e\u5b9a"))},H=function(e){var a=e.data,t=e.type,n=e.onSubmit;return console.log(a),c.a.createElement("div",null,t===u.JigsawElements.Banner&&c.a.createElement(V,{data:a,onSubmit:n}),t===u.JigsawElements.Card&&c.a.createElement(X,{data:a,onSubmit:n}),t===u.JigsawElements.Goods&&c.a.createElement($,{data:a,onSubmit:n}),t===u.JigsawElements.Text&&c.a.createElement(q,{data:a,onSubmit:n}))},K=new function e(){var a=this;Object(k.a)(this,e),this.iframe=void 0,this.postMessage=function(e){a.iframe?a.iframe.contentWindow.postMessage(e,"*"):console.error("\u6ca1\u6709\u627e\u5230iframe")},this.find=function(e){a.iframe=document.getElementById(e)},this.postData=function(e){a.postMessage({type:"UPDATE_DATA",payload:e})},this.postEvent=function(e){a.postMessage({type:"UPDATE_EVENT",payload:e})}},Q=function(){var e=Object(l.useState)([]),a=Object(s.a)(e,2),t=a[0],n=a[1],o=Object(l.useState)({}),r=Object(s.a)(o,2),p=r[0],b=r[1],g=Object(l.useMemo)((function(){return v()(t[p.componentIndex],"value[".concat(p.elementIndex,"].value"),{})}),[t,p.componentIndex,p.elementIndex]),O=S(t);Object(l.useEffect)((function(){n(O.data)}),[O.data]),Object(l.useEffect)((function(){K.find("livePage")}),[]),Object(l.useEffect)((function(){K.postData(t)}),[t]);return c.a.createElement(f.a,{backend:E.a},c.a.createElement("div",{className:M.a.page},c.a.createElement("div",{className:M.a.layout},c.a.createElement("div",{className:M.a.operater},c.a.createElement("button",{className:M.a.reset,onClick:O.clear},"\u91cd\u7f6e"),c.a.createElement("div",{className:M.a.components},c.a.createElement(P,{handleComponentDropEnd:function(e,a){var l=Object(d.default)(t,(function(a){return[].concat(Object(i.a)(a),[Object(m.a)(Object(m.a)({},e),{},{__key:(new Date).getTime()})])}));n(l.filter((function(e){return!!e})))}})),c.a.createElement("div",{className:M.a.elements},c.a.createElement(F,{handleElementDropEnd:function(e,a){if(void 0!==a.index){var l=t[a.index].type,c=N[l].multiple,o=Object(d.default)(t,(function(n){if(!c)return n[a.index].value=[Object(m.a)(Object(m.a)({},e),{},{__key:(new Date).getTime(),value:[]})],n;var l=t[a.index].value||[],o=[].concat(Object(i.a)(l),[Object(m.a)(Object(m.a)({},e),{},{__key:(new Date).getTime(),value:[]})]);return n[a.index].value=o,n}));n(o.filter((function(e){return!!e})))}}}))),c.a.createElement("div",{className:M.a.preview},c.a.createElement("div",{className:M.a.json},c.a.createElement(T,{value:t,onElementMove:function(e){var a=e.componentIndex,l=e.dragIndex,c=e.hoverIndex;"number"===typeof l&&"number"===typeof c&&n(Object(d.default)(t,(function(e){e[a].value=Object(u.swap)(t[a].value,l,c)})))},onElementSelect:function(e){b({componentIndex:e.componentIndex,elementIndex:e.elementIndex,elementType:e.elementType})},onComponentMove:function(e){var a=e.dragIndex,l=e.hoverIndex;"number"===typeof a&&"number"===typeof l&&n(Object(u.swap)(t,a,l))}}))),c.a.createElement("div",{className:M.a.form},c.a.createElement(H,{data:g,type:p.elementType,onSubmit:function(e){n(Object(d.default)(t,(function(a){a[p.componentIndex].value[p.elementIndex].value=e})))}})),c.a.createElement("div",{className:M.a.livePage},c.a.createElement("iframe",{id:"livePage",src:"https://lowinc.github.io/mobile/index.html",title:"livePage",className:M.a.iframe})))))};var Y=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(Q,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[48,1,2]]]);
//# sourceMappingURL=main.d4924f59.chunk.js.map
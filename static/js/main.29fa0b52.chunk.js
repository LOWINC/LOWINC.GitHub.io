(this.webpackJsonpundefined=this.webpackJsonpundefined||[]).push([[0],{203:function(e,n,t){"use strict";t.r(n);var a,o=t(0),c=t.n(o),r=t(4),l=t.n(r),m=t(15),i=t(61),s=t(5),p=t(3),u=t(25),d=t(205),E=t(91),v=t(85),g=t.n(v),f=function(e){var n={Banner:function(){return null},Card:function(){return c.a.createElement("div",null,c.a.createElement("input",{placeholder:"\u8bf7\u8f93\u5165\u4f1a\u5458\u5361id",type:"text",className:"val"}))},Goods:function(){return c.a.createElement("div",null,c.a.createElement("input",{placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1id",type:"text",className:"val"}))},Text:function(){return c.a.createElement("div",null,c.a.createElement("input",{placeholder:"\u8bf7\u8f93\u5165\u6587\u6848",type:"text",className:"val"}))}}[e.type],t="function"===typeof n?n():null;return c.a.createElement("div",{className:g.a.page},c.a.createElement("div",{className:"cell"},c.a.createElement("input",{placeholder:"\u8bf7\u8f93\u5165\u540d\u79f0",type:"text",className:"val"}),c.a.createElement("input",{placeholder:"\u8bf7\u8f93\u5165\u63cf\u8ff0",type:"text",className:"val"}),c.a.createElement("input",{placeholder:"\u8bf7\u8f93\u5165\u56fe\u7247",type:"text",className:"val"}),c.a.createElement("input",{placeholder:"\u8bf7\u8f93\u5165\u94fe\u63a5",type:"text",className:"val"})),c.a.createElement("div",null,t),c.a.createElement("button",{onClick:e.onConfirm},"\u66f4\u65b0"))},y=t(206),b=t(14),x=(a={},Object(b.a)(a,p.JigsawComponents.Swiper,{multiple:!0,elements:[p.JigsawElements.Banner,p.JigsawElements.Card]}),Object(b.a)(a,p.JigsawComponents.Block,{multiple:!0,elements:[p.JigsawElements.Goods]}),Object(b.a)(a,p.JigsawComponents.Line,{multiple:!0,elements:[p.JigsawElements.Goods]}),Object(b.a)(a,p.JigsawComponents.Title,{multiple:!1,elements:[p.JigsawElements.Text]}),a),_=t(20),w=t(207),O=t(89),j=t.n(O),J=function(e){var n=e.index,t=e.move,a=Object(o.useRef)(null),r=Object(y.a)({accept:Object.keys(e.acceptType),hover:function(e,o){var c;if(a.current){var r=e.index,l=n;if(r!==l){var m=null===(c=a.current)||void 0===c?void 0:c.getBoundingClientRect(),i=(m.bottom-m.top)/2,s=o.getClientOffset().y-m.top;r<l&&s<i||r>l&&s>i||(t(r,l),e.index=l)}}}}),l=Object(s.a)(r,2)[1],m=Object(w.a)({item:{type:e.type,index:n},collect:function(e){return{isDragging:e.isDragging()}}});return(0,Object(s.a)(m,2)[1])(l(a)),c.a.createElement("div",{ref:a,className:j.a.position},e.children)},T=t(39),h=t.n(T),C=function(e){var n=Object(y.a)({accept:x[e.componentType].elements,drop:function(){return{index:e.index,name:"ReciverElement"}},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}),t=Object(s.a)(n,2)[1],a=function(n,t){e.onElementMove({componentIndex:e.index,dragIndex:n,hoverIndex:t})};return c.a.createElement("div",{ref:t,className:h.a.component},c.a.createElement("div",{className:h.a.box},c.a.createElement(_.AppointLayout,{componentType:e.componentType},e.value.map((function(n,t){return n?c.a.createElement(J,{key:"".concat(n.type,"-").concat(t),index:t,type:n.type,move:a,acceptType:p.JigsawElements},c.a.createElement("div",{className:h.a.item,onClick:function(){return e.onElementSelect({elementIndex:t,elementType:n.type})}},e.componentType===p.JigsawComponents.Title&&c.a.createElement(_.Title,{name:"\u7ec4\u4ef6\uff1a".concat(e.componentType," / \u5143\u7d20\uff1a").concat(n.type),desc:"\u7ec4\u4ef6\uff1a".concat(e.componentType," / \u5143\u7d20\uff1a").concat(n.type)}),e.componentType===p.JigsawComponents.Line&&c.a.createElement(_.Line,{name:"\u7ec4\u4ef6\uff1a".concat(e.componentType," / \u5143\u7d20\uff1a").concat(n.type),desc:"\u7ec4\u4ef6\uff1a".concat(e.componentType," / \u5143\u7d20\uff1a").concat(n.type),img:"https://interest-image-dev.billbear.cn/dev/GOODS/tn-iEEAi-2tPTbMjX9CmotygqJ55YAx_08-x4WrFFPs=@big"}),e.componentType===p.JigsawComponents.Block&&c.a.createElement(_.Block,{name:"\u7ec4\u4ef6\uff1a".concat(e.componentType," / \u5143\u7d20\uff1a").concat(n.type),desc:"\u7ec4\u4ef6\uff1a".concat(e.componentType," / \u5143\u7d20\uff1a").concat(n.type),img:"https://interest-image-dev.billbear.cn/dev/GOODS/tn-iEEAi-2tPTbMjX9CmotygqJ55YAx_08-x4WrFFPs=@big"}),e.componentType===p.JigsawComponents.Swiper&&c.a.createElement(_.Banner,{name:"\u7ec4\u4ef6\uff1a".concat(e.componentType," / \u5143\u7d20\uff1a").concat(n.type),desc:"\u7ec4\u4ef6\uff1a".concat(e.componentType," / \u5143\u7d20\uff1a").concat(n.type),img:"https://interest-image-dev.billbear.cn/dev/GOODS/tn-iEEAi-2tPTbMjX9CmotygqJ55YAx_08-x4WrFFPs=@big"}))):null})))))},N=t(28),I=t.n(N),k=function(e){var n=Object(y.a)({accept:Object.keys(p.JigsawComponents),drop:function(){return{name:"ReciverMain"}},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}),t=Object(s.a)(n,2)[1];return c.a.createElement("div",{ref:t,className:I.a.component},c.a.createElement("div",{className:I.a.box},e.value.map((function(n,t){return n?c.a.createElement(J,{key:n.__key,index:t,type:n.type,acceptType:p.JigsawComponents,move:function(n,a){return e.onComponentMove({componentIndex:t,dragIndex:n,hoverIndex:a})}},c.a.createElement("div",{className:I.a.elementWrapper},n.type,c.a.createElement("div",{className:I.a.item},c.a.createElement(C,{index:t,componentType:n.type,value:n.value||[],onElementMove:e.onElementMove,onElementSelect:function(n){var a=n.elementIndex,o=n.elementType;return e.onElementSelect({elementIndex:a,elementType:o,componentIndex:t})}})))):null}))))};function D(e){var n=Object(o.useState)([]),t=Object(s.a)(n,2),a=t[0],c=t[1];return Object(o.useEffect)((function(){var e=function(){try{var e=localStorage.getItem("cache-data")||"[]";return JSON.parse(e)}catch(n){return[]}}();console.log("data:",e),c(e)}),[]),Object(o.useEffect)((function(){0!==e.length&&localStorage.setItem("cache-data",JSON.stringify(e))}),[e]),{data:a,clear:function(){localStorage.setItem("cache-data",JSON.stringify([])),c([])}}}var S=t(9),M=t.n(S),B=t(59),A=t.n(B),F=function(e){var n=Object(w.a)({item:{name:e.name,type:e.name},end:function(n,t){var a=t.getDropResult();n&&a&&e.onEnd(n,a)},collect:function(e){return{isDragging:e.isDragging()}}}),t=Object(s.a)(n,2)[1];return c.a.createElement("div",{ref:t,className:A.a.component},c.a.createElement("button",{className:A.a.btn},e.children))},G=function(e){var n=e.handleComponentDropEnd,t=[{Element:c.a.createElement(F,{name:p.JigsawComponents.Swiper,onEnd:n},p.JigsawComponents.Swiper)},{Element:c.a.createElement(F,{name:p.JigsawComponents.Title,onEnd:n},p.JigsawComponents.Title)},{Element:c.a.createElement(F,{name:p.JigsawComponents.Block,onEnd:n},p.JigsawComponents.Block)},{Element:c.a.createElement(F,{name:p.JigsawComponents.Line,onEnd:n},p.JigsawComponents.Line)}];return c.a.createElement("div",null,t.map((function(e,n){return c.a.createElement("div",{key:n},e.Element)})))},R=t(60),W=t.n(R),P=function(e){var n=Object(w.a)({item:{name:e.name,type:e.name},end:function(n,t){var a=t.getDropResult();n&&a&&e.onEnd(n,a)},collect:function(e){return{isDragging:e.isDragging()}}}),t=Object(s.a)(n,2)[1];return c.a.createElement("div",{ref:t,className:W.a.component},c.a.createElement("button",{className:W.a.btn},e.children))},L=function(e){var n=e.handleElementDropEnd,t=[{Element:c.a.createElement(P,{name:p.JigsawElements.Banner,onEnd:n},p.JigsawElements.Banner)},{Element:c.a.createElement(P,{name:p.JigsawElements.Card,onEnd:n},p.JigsawElements.Card)},{Element:c.a.createElement(P,{name:p.JigsawElements.Goods,onEnd:n},p.JigsawElements.Goods)},{Element:c.a.createElement(P,{name:p.JigsawElements.Text,onEnd:n},p.JigsawElements.Text)}];return c.a.createElement("div",null,t.map((function(e,n){return c.a.createElement("div",{key:n},e.Element)})))},X=function(){var e=Object(o.useState)({}),n=Object(s.a)(e,2),t=n[0],a=n[1],r=Object(o.useState)([]),l=Object(s.a)(r,2),v=l[0],g=l[1],y=D(v);Object(o.useEffect)((function(){g(y.data)}),[y.data]);return c.a.createElement(d.a,{backend:E.a},c.a.createElement("div",{className:M.a.page},c.a.createElement("div",{className:M.a.layout},c.a.createElement("div",{className:M.a.operater},c.a.createElement("button",{className:M.a.reset,onClick:y.clear},"\u91cd\u7f6e"),c.a.createElement("div",{className:M.a.components},c.a.createElement(G,{handleComponentDropEnd:function(e,n){var t=Object(u.default)(v,(function(n){return[].concat(Object(i.a)(n),[Object(m.a)(Object(m.a)({},e),{},{__key:(new Date).getTime()})])}));g(t.filter((function(e){return!!e})))}})),c.a.createElement("div",{className:M.a.elements},c.a.createElement(L,{handleElementDropEnd:function(e,n){if(void 0!==n.index){var t=v[n.index].type,a=x[t].multiple,o=Object(u.default)(v,(function(t){if(!a)return t[n.index].value=[Object(m.a)(Object(m.a)({},e),{},{__key:(new Date).getTime()})],t;var o=v[n.index].value||[],c=[].concat(Object(i.a)(o),[Object(m.a)(Object(m.a)({},e),{},{__key:(new Date).getTime()})]);return t[n.index].value=c,t}));g(o.filter((function(e){return!!e})))}}}))),c.a.createElement("div",{className:M.a.preview},c.a.createElement("div",{className:M.a.json},c.a.createElement(k,{value:v,onElementMove:function(e){var n=e.componentIndex,t=e.dragIndex,a=e.hoverIndex;"number"===typeof t&&"number"===typeof a&&g(Object(u.default)(v,(function(e){e[n].value=Object(p.swap)(v[n].value,t,a)})))},onElementSelect:function(e){a({componentIndex:e.componentIndex,elementIndex:e.elementIndex,elementType:e.elementType}),console.log(e)},onComponentMove:function(e){var n=e.dragIndex,t=e.hoverIndex;"number"===typeof n&&"number"===typeof t&&g(Object(p.swap)(v,n,t))}}))),c.a.createElement("div",{className:M.a.form},c.a.createElement(f,{type:t.elementType,onConfirm:console.log})))))};var q=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(X,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},28:function(e,n,t){e.exports={box:"reciver-main_box__Te1-j",item:"reciver-main_item__33peM",elementWrapper:"reciver-main_elementWrapper__389OI"}},39:function(e,n,t){e.exports={box:"reciver-element_box__F0elu"}},59:function(e,n,t){e.exports={btn:"component_btn__3xI-F"}},60:function(e,n,t){e.exports={btn:"element_btn__2MCOl"}},85:function(e,n,t){e.exports={page:"form_page__3mMIE"}},89:function(e,n,t){e.exports={position:"sort_position__1Fv_-",move:"sort_move__2x9ou"}},9:function(e,n,t){e.exports={layout:"jigsaw_layout__c2xAh",form:"jigsaw_form__1Io7R",operater:"jigsaw_operater__113OR",preview:"jigsaw_preview__3BObr",components:"jigsaw_components__2p1N8",elements:"jigsaw_elements__-dPss",iframe:"jigsaw_iframe__2MOlz",reset:"jigsaw_reset__2oXwJ"}},93:function(e,n,t){e.exports=t(203)}},[[93,1,2]]]);
//# sourceMappingURL=main.29fa0b52.chunk.js.map